{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nexports.__esModule = true;\nexports.styles = exports.Errors = void 0;\n\nvar React = __importStar(require(\"react\"));\n\nvar bus_1 = require(\"../bus\");\n\nvar Dialog_1 = require(\"../components/Dialog\");\n\nvar LeftRightDialogHeader_1 = require(\"../components/LeftRightDialogHeader\");\n\nvar Overlay_1 = require(\"../components/Overlay\");\n\nvar Toast_1 = require(\"../components/Toast\");\n\nvar nodeStackFrames_1 = require(\"../helpers/nodeStackFrames\");\n\nvar noop_template_1 = require(\"../helpers/noop-template\");\n\nvar stack_frame_1 = require(\"../helpers/stack-frame\");\n\nvar RuntimeError_1 = require(\"./RuntimeError\");\n\nfunction getErrorSignature(ev) {\n  var event = ev.event;\n\n  switch (event.type) {\n    case bus_1.TYPE_UNHANDLED_ERROR:\n    case bus_1.TYPE_UNHANDLED_REJECTION:\n      {\n        return event.reason.name + \"::\" + event.reason.message + \"::\" + event.reason.stack;\n      }\n\n    default:\n      {}\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  var _ = event;\n  return '';\n}\n\nvar HotlinkedText = function HotlinkedText(props) {\n  var text = props.text;\n  var linkRegex = /https?:\\/\\/[^\\s/$.?#].[^\\s\"]*/i;\n  return React.createElement(React.Fragment, null, linkRegex.test(text) ? text.split(' ').map(function (word, index, array) {\n    if (linkRegex.test(word)) {\n      return React.createElement(React.Fragment, {\n        key: \"link-\" + index\n      }, React.createElement(\"a\", {\n        href: word\n      }, word), index === array.length - 1 ? '' : ' ');\n    }\n\n    return index === array.length - 1 ? React.createElement(React.Fragment, {\n      key: \"text-\" + index\n    }, word) : React.createElement(React.Fragment, {\n      key: \"text-\" + index\n    }, word, \" \");\n  }) : text);\n};\n\nfunction getErrorByType(ev) {\n  return __awaiter(this, void 0, void 0, function () {\n    var id, event, _a, _;\n\n    var _b;\n\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          id = ev.id, event = ev.event;\n          _a = event.type;\n\n          switch (_a) {\n            case bus_1.TYPE_UNHANDLED_ERROR:\n              return [3\n              /*break*/\n              , 1];\n\n            case bus_1.TYPE_UNHANDLED_REJECTION:\n              return [3\n              /*break*/\n              , 1];\n          }\n\n          return [3\n          /*break*/\n          , 3];\n\n        case 1:\n          _b = {\n            id: id,\n            runtime: true,\n            error: event.reason\n          };\n          return [4\n          /*yield*/\n          , stack_frame_1.getOriginalStackFrames(nodeStackFrames_1.isNodeError(event.reason), event.frames)];\n\n        case 2:\n          return [2\n          /*return*/\n          , (_b.frames = _c.sent(), _b)];\n\n        case 3:\n          {\n            return [3\n            /*break*/\n            , 4];\n          }\n          _c.label = 4;\n\n        case 4:\n          _ = event;\n          throw new Error('type system invariant violation');\n      }\n    });\n  });\n}\n\nvar Errors = function Errors(_a) {\n  var errors = _a.errors;\n\n  var _b = __read(React.useState({}), 2),\n      lookups = _b[0],\n      setLookups = _b[1];\n\n  var _c = __read(React.useMemo(function () {\n    var ready = [];\n    var next = null; // Ensure errors are displayed in the order they occurred in:\n\n    for (var idx = 0; idx < errors.length; ++idx) {\n      var e = errors[idx];\n      var id = e.id;\n\n      if (id in lookups) {\n        ready.push(lookups[id]);\n        continue;\n      } // Check for duplicate errors\n\n\n      if (idx > 0) {\n        var prev = errors[idx - 1];\n\n        if (getErrorSignature(prev) === getErrorSignature(e)) {\n          continue;\n        }\n      }\n\n      next = e;\n      break;\n    }\n\n    return [ready, next];\n  }, [errors, lookups]), 2),\n      readyErrors = _c[0],\n      nextError = _c[1];\n\n  var isLoading = React.useMemo(function () {\n    return readyErrors.length < 1 && Boolean(errors.length);\n  }, [errors.length, readyErrors.length]);\n  React.useEffect(function () {\n    if (nextError == null) {\n      return;\n    }\n\n    var mounted = true;\n    getErrorByType(nextError).then(function (resolved) {\n      // We don't care if the desired error changed while we were resolving,\n      // thus we're not tracking it using a ref. Once the work has been done,\n      // we'll store it.\n      if (mounted) {\n        setLookups(function (m) {\n          var _a;\n\n          return __assign(__assign({}, m), (_a = {}, _a[resolved.id] = resolved, _a));\n        });\n      }\n    }, function () {// TODO: handle this, though an edge case\n    });\n    return function () {\n      mounted = false;\n    };\n  }, [nextError]);\n\n  var _d = __read(React.useState(false), 2),\n      isMinimized = _d[0],\n      setMinimized = _d[1];\n\n  var _e = __read(React.useState(0), 2),\n      activeIdx = _e[0],\n      setActiveIndex = _e[1];\n\n  var previous = React.useCallback(function (e) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    setActiveIndex(function (v) {\n      return Math.max(0, v - 1);\n    });\n  }, []);\n  var next = React.useCallback(function (e) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    setActiveIndex(function (v) {\n      return Math.max(0, Math.min(readyErrors.length - 1, v + 1));\n    });\n  }, [readyErrors.length]);\n  var activeError = React.useMemo(function () {\n    var _a;\n\n    return (_a = readyErrors[activeIdx]) !== null && _a !== void 0 ? _a : null;\n  }, [activeIdx, readyErrors]); // Reset component state when there are no errors to be displayed.\n  // This should never happen, but lets handle it.\n\n  React.useEffect(function () {\n    if (errors.length < 1) {\n      setLookups({});\n      setMinimized(false);\n      setActiveIndex(0);\n    }\n  }, [errors.length]);\n  var minimize = React.useCallback(function (e) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    setMinimized(true);\n  }, []);\n  var reopen = React.useCallback(function (e) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    setMinimized(false);\n  }, []); // This component shouldn't be rendered with no errors, but if it is, let's\n  // handle it gracefully by rendering nothing.\n\n  if (errors.length < 1 || activeError == null) {\n    return null;\n  }\n\n  if (isLoading) {\n    // TODO: better loading state\n    return React.createElement(Overlay_1.Overlay, null);\n  }\n\n  if (isMinimized) {\n    return React.createElement(Toast_1.Toast, {\n      className: \"nextjs-toast-errors-parent\",\n      onClick: reopen\n    }, React.createElement(\"div\", {\n      className: \"nextjs-toast-errors\"\n    }, React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\"\n    }, React.createElement(\"circle\", {\n      cx: \"12\",\n      cy: \"12\",\n      r: \"10\"\n    }), React.createElement(\"line\", {\n      x1: \"12\",\n      y1: \"8\",\n      x2: \"12\",\n      y2: \"12\"\n    }), React.createElement(\"line\", {\n      x1: \"12\",\n      y1: \"16\",\n      x2: \"12.01\",\n      y2: \"16\"\n    })), React.createElement(\"span\", null, readyErrors.length, \" error\", readyErrors.length > 1 ? 's' : '')));\n  }\n\n  var isServerError = nodeStackFrames_1.isNodeError(activeError.error);\n  return React.createElement(Overlay_1.Overlay, null, React.createElement(Dialog_1.Dialog, {\n    type: \"error\",\n    \"aria-labelledby\": \"nextjs__container_errors_label\",\n    \"aria-describedby\": \"nextjs__container_errors_desc\",\n    onClose: isServerError ? undefined : minimize\n  }, React.createElement(Dialog_1.DialogContent, null, React.createElement(Dialog_1.DialogHeader, {\n    className: \"nextjs-container-errors-header\"\n  }, React.createElement(LeftRightDialogHeader_1.LeftRightDialogHeader, {\n    previous: activeIdx > 0 ? previous : null,\n    next: activeIdx < readyErrors.length - 1 ? next : null,\n    close: isServerError ? undefined : minimize\n  }, React.createElement(\"small\", null, React.createElement(\"span\", null, activeIdx + 1), \" of\", ' ', React.createElement(\"span\", null, readyErrors.length), \" unhandled error\", readyErrors.length < 2 ? '' : 's')), React.createElement(\"h1\", {\n    id: \"nextjs__container_errors_label\"\n  }, isServerError ? 'Server Error' : 'Unhandled Runtime Error'), React.createElement(\"p\", {\n    id: \"nextjs__container_errors_desc\"\n  }, activeError.error.name, \":\", ' ', React.createElement(HotlinkedText, {\n    text: activeError.error.message\n  })), isServerError ? React.createElement(\"div\", null, React.createElement(\"small\", null, \"This error happened while generating the page. Any console logs will be displayed in the terminal window.\")) : undefined), React.createElement(Dialog_1.DialogBody, {\n    className: \"nextjs-container-errors-body\"\n  }, React.createElement(RuntimeError_1.RuntimeError, {\n    key: activeError.id.toString(),\n    error: activeError\n  })))));\n};\n\nexports.Errors = Errors;\nexports.styles = noop_template_1.noop(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  .nextjs-container-errors-header > h1 {\\n    font-size: var(--size-font-big);\\n    line-height: var(--size-font-bigger);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap-half));\\n  }\\n  .nextjs-container-errors-header small {\\n    font-size: var(--size-font-small);\\n    color: var(--color-accents-1);\\n    margin-left: var(--size-gap-double);\\n  }\\n  .nextjs-container-errors-header small > span {\\n    font-family: var(--font-stack-monospace);\\n  }\\n  .nextjs-container-errors-header > p {\\n    font-family: var(--font-stack-monospace);\\n    font-size: var(--size-font-small);\\n    line-height: var(--size-font-big);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n    color: var(--color-ansi-red);\\n    white-space: pre-wrap;\\n  }\\n  .nextjs-container-errors-header > div > small {\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n  }\\n  .nextjs-container-errors-header > p > a {\\n    color: var(--color-ansi-red);\\n  }\\n\\n  .nextjs-container-errors-body > h5:not(:first-child) {\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap));\\n  }\\n  .nextjs-container-errors-body > h5 {\\n    margin-bottom: var(--size-gap);\\n  }\\n\\n  .nextjs-toast-errors-parent {\\n    cursor: pointer;\\n    transition: transform 0.2s ease;\\n  }\\n  .nextjs-toast-errors-parent:hover {\\n    transform: scale(1.1);\\n  }\\n  .nextjs-toast-errors {\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-start;\\n  }\\n  .nextjs-toast-errors > svg {\\n    margin-right: var(--size-gap);\\n  }\\n\"], [\"\\n  .nextjs-container-errors-header > h1 {\\n    font-size: var(--size-font-big);\\n    line-height: var(--size-font-bigger);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap-half));\\n  }\\n  .nextjs-container-errors-header small {\\n    font-size: var(--size-font-small);\\n    color: var(--color-accents-1);\\n    margin-left: var(--size-gap-double);\\n  }\\n  .nextjs-container-errors-header small > span {\\n    font-family: var(--font-stack-monospace);\\n  }\\n  .nextjs-container-errors-header > p {\\n    font-family: var(--font-stack-monospace);\\n    font-size: var(--size-font-small);\\n    line-height: var(--size-font-big);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n    color: var(--color-ansi-red);\\n    white-space: pre-wrap;\\n  }\\n  .nextjs-container-errors-header > div > small {\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n  }\\n  .nextjs-container-errors-header > p > a {\\n    color: var(--color-ansi-red);\\n  }\\n\\n  .nextjs-container-errors-body > h5:not(:first-child) {\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap));\\n  }\\n  .nextjs-container-errors-body > h5 {\\n    margin-bottom: var(--size-gap);\\n  }\\n\\n  .nextjs-toast-errors-parent {\\n    cursor: pointer;\\n    transition: transform 0.2s ease;\\n  }\\n  .nextjs-toast-errors-parent:hover {\\n    transform: scale(1.1);\\n  }\\n  .nextjs-toast-errors {\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-start;\\n  }\\n  .nextjs-toast-errors > svg {\\n    margin-right: var(--size-gap);\\n  }\\n\"])));\nvar templateObject_1;","map":{"version":3,"sources":["../../../src/internal/container/Errors.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nexports.__esModule = true;\nexports.styles = exports.Errors = void 0;\nvar React = __importStar(require(\"react\"));\nvar bus_1 = require(\"../bus\");\nvar Dialog_1 = require(\"../components/Dialog\");\nvar LeftRightDialogHeader_1 = require(\"../components/LeftRightDialogHeader\");\nvar Overlay_1 = require(\"../components/Overlay\");\nvar Toast_1 = require(\"../components/Toast\");\nvar nodeStackFrames_1 = require(\"../helpers/nodeStackFrames\");\nvar noop_template_1 = require(\"../helpers/noop-template\");\nvar stack_frame_1 = require(\"../helpers/stack-frame\");\nvar RuntimeError_1 = require(\"./RuntimeError\");\nfunction getErrorSignature(ev) {\n    var event = ev.event;\n    switch (event.type) {\n        case bus_1.TYPE_UNHANDLED_ERROR:\n        case bus_1.TYPE_UNHANDLED_REJECTION: {\n            return event.reason.name + \"::\" + event.reason.message + \"::\" + event.reason.stack;\n        }\n        default: {\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var _ = event;\n    return '';\n}\nvar HotlinkedText = function HotlinkedText(props) {\n    var text = props.text;\n    var linkRegex = /https?:\\/\\/[^\\s/$.?#].[^\\s\"]*/i;\n    return (React.createElement(React.Fragment, null, linkRegex.test(text)\n        ? text.split(' ').map(function (word, index, array) {\n            if (linkRegex.test(word)) {\n                return (React.createElement(React.Fragment, { key: \"link-\" + index },\n                    React.createElement(\"a\", { href: word }, word),\n                    index === array.length - 1 ? '' : ' '));\n            }\n            return index === array.length - 1 ? (React.createElement(React.Fragment, { key: \"text-\" + index }, word)) : (React.createElement(React.Fragment, { key: \"text-\" + index },\n                word,\n                \" \"));\n        })\n        : text));\n};\nfunction getErrorByType(ev) {\n    return __awaiter(this, void 0, void 0, function () {\n        var id, event, _a, _;\n        var _b;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    id = ev.id, event = ev.event;\n                    _a = event.type;\n                    switch (_a) {\n                        case bus_1.TYPE_UNHANDLED_ERROR: return [3 /*break*/, 1];\n                        case bus_1.TYPE_UNHANDLED_REJECTION: return [3 /*break*/, 1];\n                    }\n                    return [3 /*break*/, 3];\n                case 1:\n                    _b = {\n                        id: id,\n                        runtime: true,\n                        error: event.reason\n                    };\n                    return [4 /*yield*/, stack_frame_1.getOriginalStackFrames(nodeStackFrames_1.isNodeError(event.reason), event.frames)];\n                case 2: return [2 /*return*/, (_b.frames = _c.sent(),\n                        _b)];\n                case 3:\n                    {\n                        return [3 /*break*/, 4];\n                    }\n                    _c.label = 4;\n                case 4:\n                    _ = event;\n                    throw new Error('type system invariant violation');\n            }\n        });\n    });\n}\nvar Errors = function Errors(_a) {\n    var errors = _a.errors;\n    var _b = __read(React.useState({}), 2), lookups = _b[0], setLookups = _b[1];\n    var _c = __read(React.useMemo(function () {\n        var ready = [];\n        var next = null;\n        // Ensure errors are displayed in the order they occurred in:\n        for (var idx = 0; idx < errors.length; ++idx) {\n            var e = errors[idx];\n            var id = e.id;\n            if (id in lookups) {\n                ready.push(lookups[id]);\n                continue;\n            }\n            // Check for duplicate errors\n            if (idx > 0) {\n                var prev = errors[idx - 1];\n                if (getErrorSignature(prev) === getErrorSignature(e)) {\n                    continue;\n                }\n            }\n            next = e;\n            break;\n        }\n        return [ready, next];\n    }, [errors, lookups]), 2), readyErrors = _c[0], nextError = _c[1];\n    var isLoading = React.useMemo(function () {\n        return readyErrors.length < 1 && Boolean(errors.length);\n    }, [errors.length, readyErrors.length]);\n    React.useEffect(function () {\n        if (nextError == null) {\n            return;\n        }\n        var mounted = true;\n        getErrorByType(nextError).then(function (resolved) {\n            // We don't care if the desired error changed while we were resolving,\n            // thus we're not tracking it using a ref. Once the work has been done,\n            // we'll store it.\n            if (mounted) {\n                setLookups(function (m) {\n                    var _a;\n                    return (__assign(__assign({}, m), (_a = {}, _a[resolved.id] = resolved, _a)));\n                });\n            }\n        }, function () {\n            // TODO: handle this, though an edge case\n        });\n        return function () {\n            mounted = false;\n        };\n    }, [nextError]);\n    var _d = __read(React.useState(false), 2), isMinimized = _d[0], setMinimized = _d[1];\n    var _e = __read(React.useState(0), 2), activeIdx = _e[0], setActiveIndex = _e[1];\n    var previous = React.useCallback(function (e) {\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n        setActiveIndex(function (v) { return Math.max(0, v - 1); });\n    }, []);\n    var next = React.useCallback(function (e) {\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n        setActiveIndex(function (v) {\n            return Math.max(0, Math.min(readyErrors.length - 1, v + 1));\n        });\n    }, [readyErrors.length]);\n    var activeError = React.useMemo(function () { var _a; return (_a = readyErrors[activeIdx]) !== null && _a !== void 0 ? _a : null; }, [activeIdx, readyErrors]);\n    // Reset component state when there are no errors to be displayed.\n    // This should never happen, but lets handle it.\n    React.useEffect(function () {\n        if (errors.length < 1) {\n            setLookups({});\n            setMinimized(false);\n            setActiveIndex(0);\n        }\n    }, [errors.length]);\n    var minimize = React.useCallback(function (e) {\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n        setMinimized(true);\n    }, []);\n    var reopen = React.useCallback(function (e) {\n        e === null || e === void 0 ? void 0 : e.preventDefault();\n        setMinimized(false);\n    }, []);\n    // This component shouldn't be rendered with no errors, but if it is, let's\n    // handle it gracefully by rendering nothing.\n    if (errors.length < 1 || activeError == null) {\n        return null;\n    }\n    if (isLoading) {\n        // TODO: better loading state\n        return React.createElement(Overlay_1.Overlay, null);\n    }\n    if (isMinimized) {\n        return (React.createElement(Toast_1.Toast, { className: \"nextjs-toast-errors-parent\", onClick: reopen },\n            React.createElement(\"div\", { className: \"nextjs-toast-errors\" },\n                React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", fill: \"none\", stroke: \"currentColor\", strokeWidth: \"2\", strokeLinecap: \"round\", strokeLinejoin: \"round\" },\n                    React.createElement(\"circle\", { cx: \"12\", cy: \"12\", r: \"10\" }),\n                    React.createElement(\"line\", { x1: \"12\", y1: \"8\", x2: \"12\", y2: \"12\" }),\n                    React.createElement(\"line\", { x1: \"12\", y1: \"16\", x2: \"12.01\", y2: \"16\" })),\n                React.createElement(\"span\", null,\n                    readyErrors.length,\n                    \" error\",\n                    readyErrors.length > 1 ? 's' : ''))));\n    }\n    var isServerError = nodeStackFrames_1.isNodeError(activeError.error);\n    return (React.createElement(Overlay_1.Overlay, null,\n        React.createElement(Dialog_1.Dialog, { type: \"error\", \"aria-labelledby\": \"nextjs__container_errors_label\", \"aria-describedby\": \"nextjs__container_errors_desc\", onClose: isServerError ? undefined : minimize },\n            React.createElement(Dialog_1.DialogContent, null,\n                React.createElement(Dialog_1.DialogHeader, { className: \"nextjs-container-errors-header\" },\n                    React.createElement(LeftRightDialogHeader_1.LeftRightDialogHeader, { previous: activeIdx > 0 ? previous : null, next: activeIdx < readyErrors.length - 1 ? next : null, close: isServerError ? undefined : minimize },\n                        React.createElement(\"small\", null,\n                            React.createElement(\"span\", null, activeIdx + 1),\n                            \" of\",\n                            ' ',\n                            React.createElement(\"span\", null, readyErrors.length),\n                            \" unhandled error\",\n                            readyErrors.length < 2 ? '' : 's')),\n                    React.createElement(\"h1\", { id: \"nextjs__container_errors_label\" }, isServerError ? 'Server Error' : 'Unhandled Runtime Error'),\n                    React.createElement(\"p\", { id: \"nextjs__container_errors_desc\" },\n                        activeError.error.name,\n                        \":\",\n                        ' ',\n                        React.createElement(HotlinkedText, { text: activeError.error.message })),\n                    isServerError ? (React.createElement(\"div\", null,\n                        React.createElement(\"small\", null, \"This error happened while generating the page. Any console logs will be displayed in the terminal window.\"))) : undefined),\n                React.createElement(Dialog_1.DialogBody, { className: \"nextjs-container-errors-body\" },\n                    React.createElement(RuntimeError_1.RuntimeError, { key: activeError.id.toString(), error: activeError }))))));\n};\nexports.Errors = Errors;\nexports.styles = noop_template_1.noop(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  .nextjs-container-errors-header > h1 {\\n    font-size: var(--size-font-big);\\n    line-height: var(--size-font-bigger);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap-half));\\n  }\\n  .nextjs-container-errors-header small {\\n    font-size: var(--size-font-small);\\n    color: var(--color-accents-1);\\n    margin-left: var(--size-gap-double);\\n  }\\n  .nextjs-container-errors-header small > span {\\n    font-family: var(--font-stack-monospace);\\n  }\\n  .nextjs-container-errors-header > p {\\n    font-family: var(--font-stack-monospace);\\n    font-size: var(--size-font-small);\\n    line-height: var(--size-font-big);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n    color: var(--color-ansi-red);\\n    white-space: pre-wrap;\\n  }\\n  .nextjs-container-errors-header > div > small {\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n  }\\n  .nextjs-container-errors-header > p > a {\\n    color: var(--color-ansi-red);\\n  }\\n\\n  .nextjs-container-errors-body > h5:not(:first-child) {\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap));\\n  }\\n  .nextjs-container-errors-body > h5 {\\n    margin-bottom: var(--size-gap);\\n  }\\n\\n  .nextjs-toast-errors-parent {\\n    cursor: pointer;\\n    transition: transform 0.2s ease;\\n  }\\n  .nextjs-toast-errors-parent:hover {\\n    transform: scale(1.1);\\n  }\\n  .nextjs-toast-errors {\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-start;\\n  }\\n  .nextjs-toast-errors > svg {\\n    margin-right: var(--size-gap);\\n  }\\n\"], [\"\\n  .nextjs-container-errors-header > h1 {\\n    font-size: var(--size-font-big);\\n    line-height: var(--size-font-bigger);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap-half));\\n  }\\n  .nextjs-container-errors-header small {\\n    font-size: var(--size-font-small);\\n    color: var(--color-accents-1);\\n    margin-left: var(--size-gap-double);\\n  }\\n  .nextjs-container-errors-header small > span {\\n    font-family: var(--font-stack-monospace);\\n  }\\n  .nextjs-container-errors-header > p {\\n    font-family: var(--font-stack-monospace);\\n    font-size: var(--size-font-small);\\n    line-height: var(--size-font-big);\\n    font-weight: bold;\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n    color: var(--color-ansi-red);\\n    white-space: pre-wrap;\\n  }\\n  .nextjs-container-errors-header > div > small {\\n    margin: 0;\\n    margin-top: var(--size-gap-half);\\n  }\\n  .nextjs-container-errors-header > p > a {\\n    color: var(--color-ansi-red);\\n  }\\n\\n  .nextjs-container-errors-body > h5:not(:first-child) {\\n    margin-top: calc(var(--size-gap-double) + var(--size-gap));\\n  }\\n  .nextjs-container-errors-body > h5 {\\n    margin-bottom: var(--size-gap);\\n  }\\n\\n  .nextjs-toast-errors-parent {\\n    cursor: pointer;\\n    transition: transform 0.2s ease;\\n  }\\n  .nextjs-toast-errors-parent:hover {\\n    transform: scale(1.1);\\n  }\\n  .nextjs-toast-errors {\\n    display: flex;\\n    align-items: center;\\n    justify-content: flex-start;\\n  }\\n  .nextjs-toast-errors > svg {\\n    margin-right: var(--size-gap);\\n  }\\n\"])));\nvar templateObject_1;\n//# sourceMappingURL=Errors.js.map"]},"metadata":{},"sourceType":"script"}