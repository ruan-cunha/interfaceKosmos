{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nexports.__esModule = true;\nexports.getNodeError = exports.isNodeError = exports.getFilesystemFrame = void 0;\n\nvar stacktrace_parser_1 = require(\"stacktrace-parser\");\n\nfunction getFilesystemFrame(frame) {\n  var f = __assign({}, frame);\n\n  if (typeof f.file === 'string') {\n    if ( // Posix:\n    f.file.startsWith('/') || // Win32:\n    /^[a-z]:\\\\/i.test(f.file) || // Win32 UNC:\n    f.file.startsWith('\\\\\\\\')) {\n      f.file = \"file://\" + f.file;\n    }\n  }\n\n  return f;\n}\n\nexports.getFilesystemFrame = getFilesystemFrame;\nvar symbolNodeError = Symbol('NextjsNodeError');\n\nfunction isNodeError(error) {\n  return symbolNodeError in error;\n}\n\nexports.isNodeError = isNodeError;\n\nfunction getNodeError(error) {\n  var n;\n\n  try {\n    throw new Error(error.message);\n  } catch (e) {\n    n = e;\n  }\n\n  n.name = error.name;\n\n  try {\n    n.stack = stacktrace_parser_1.parse(error.stack).map(getFilesystemFrame).map(function (f) {\n      var str = \"    at \" + f.methodName;\n\n      if (f.file) {\n        var loc = f.file;\n\n        if (f.lineNumber) {\n          loc += \":\" + f.lineNumber;\n\n          if (f.column) {\n            loc += \":\" + f.column;\n          }\n        }\n\n        str += \" (\" + loc + \")\";\n      }\n\n      return str;\n    }).join('\\n');\n  } catch (_a) {\n    n.stack = error.stack;\n  }\n\n  Object.defineProperty(n, symbolNodeError, {\n    writable: false,\n    enumerable: false,\n    configurable: false\n  });\n  return n;\n}\n\nexports.getNodeError = getNodeError;","map":{"version":3,"sources":["../../../src/internal/helpers/nodeStackFrames.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AAEA,SAAgB,kBAAhB,CAAmC,KAAnC,EAAoD;AAClD,MAAM,CAAC,GAAA,QAAA,CAAA,EAAA,EAAoB,KAApB,CAAP;;AAEA,MAAI,OAAO,CAAC,CAAC,IAAT,KAAkB,QAAtB,EAAgC;AAC9B,SACE;AACA,IAAA,CAAC,CAAC,IAAF,CAAO,UAAP,CAAkB,GAAlB,KACA;AACA,iBAAa,IAAb,CAAkB,CAAC,CAAC,IAApB,CAFA,IAGA;AACA,IAAA,CAAC,CAAC,IAAF,CAAO,UAAP,CAAkB,MAAlB,CANF,EAOE;AACA,MAAA,CAAC,CAAC,IAAF,GAAS,YAAU,CAAC,CAAC,IAArB;AACD;AACF;;AAED,SAAO,CAAP;AACD;;AAjBD,OAAA,CAAA,kBAAA,GAAA,kBAAA;AAmBA,IAAM,eAAe,GAAG,MAAM,CAAC,iBAAD,CAA9B;;AAEA,SAAgB,WAAhB,CAA4B,KAA5B,EAAwC;AACtC,SAAO,eAAe,IAAI,KAA1B;AACD;;AAFD,OAAA,CAAA,WAAA,GAAA,WAAA;;AAIA,SAAgB,YAAhB,CAA6B,KAA7B,EAAyC;AACvC,MAAI,CAAJ;;AACA,MAAI;AACF,UAAM,IAAI,KAAJ,CAAU,KAAK,CAAC,OAAhB,CAAN;AACD,GAFD,CAEE,OAAO,CAAP,EAAU;AACV,IAAA,CAAC,GAAG,CAAJ;AACD;;AAED,EAAA,CAAC,CAAC,IAAF,GAAS,KAAK,CAAC,IAAf;;AACA,MAAI;AACF,IAAA,CAAC,CAAC,KAAF,GAAU,mBAAA,CAAA,KAAA,CAAM,KAAK,CAAC,KAAZ,EACP,GADO,CACH,kBADG,EAEP,GAFO,CAEH,UAAC,CAAD,EAAE;AACL,UAAI,GAAG,GAAG,YAAU,CAAC,CAAC,UAAtB;;AACA,UAAI,CAAC,CAAC,IAAN,EAAY;AACV,YAAI,GAAG,GAAG,CAAC,CAAC,IAAZ;;AACA,YAAI,CAAC,CAAC,UAAN,EAAkB;AAChB,UAAA,GAAG,IAAI,MAAI,CAAC,CAAC,UAAb;;AACA,cAAI,CAAC,CAAC,MAAN,EAAc;AACZ,YAAA,GAAG,IAAI,MAAI,CAAC,CAAC,MAAb;AACD;AACF;;AACD,QAAA,GAAG,IAAI,OAAK,GAAL,GAAQ,GAAf;AACD;;AACD,aAAO,GAAP;AACD,KAfO,EAgBP,IAhBO,CAgBF,IAhBE,CAAV;AAiBD,GAlBD,CAkBE,OAAA,EAAA,EAAM;AACN,IAAA,CAAC,CAAC,KAAF,GAAU,KAAK,CAAC,KAAhB;AACD;;AAED,EAAA,MAAM,CAAC,cAAP,CAAsB,CAAtB,EAAyB,eAAzB,EAA0C;AACxC,IAAA,QAAQ,EAAE,KAD8B;AAExC,IAAA,UAAU,EAAE,KAF4B;AAGxC,IAAA,YAAY,EAAE;AAH0B,GAA1C;AAKA,SAAO,CAAP;AACD;;AArCD,OAAA,CAAA,YAAA,GAAA,YAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.getNodeError = exports.isNodeError = exports.getFilesystemFrame = void 0;\nvar stacktrace_parser_1 = require(\"stacktrace-parser\");\nfunction getFilesystemFrame(frame) {\n    var f = __assign({}, frame);\n    if (typeof f.file === 'string') {\n        if (\n        // Posix:\n        f.file.startsWith('/') ||\n            // Win32:\n            /^[a-z]:\\\\/i.test(f.file) ||\n            // Win32 UNC:\n            f.file.startsWith('\\\\\\\\')) {\n            f.file = \"file://\" + f.file;\n        }\n    }\n    return f;\n}\nexports.getFilesystemFrame = getFilesystemFrame;\nvar symbolNodeError = Symbol('NextjsNodeError');\nfunction isNodeError(error) {\n    return symbolNodeError in error;\n}\nexports.isNodeError = isNodeError;\nfunction getNodeError(error) {\n    var n;\n    try {\n        throw new Error(error.message);\n    }\n    catch (e) {\n        n = e;\n    }\n    n.name = error.name;\n    try {\n        n.stack = stacktrace_parser_1.parse(error.stack)\n            .map(getFilesystemFrame)\n            .map(function (f) {\n            var str = \"    at \" + f.methodName;\n            if (f.file) {\n                var loc = f.file;\n                if (f.lineNumber) {\n                    loc += \":\" + f.lineNumber;\n                    if (f.column) {\n                        loc += \":\" + f.column;\n                    }\n                }\n                str += \" (\" + loc + \")\";\n            }\n            return str;\n        })\n            .join('\\n');\n    }\n    catch (_a) {\n        n.stack = error.stack;\n    }\n    Object.defineProperty(n, symbolNodeError, {\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n    return n;\n}\nexports.getNodeError = getNodeError;\n//# sourceMappingURL=nodeStackFrames.js.map"]},"metadata":{},"sourceType":"script"}