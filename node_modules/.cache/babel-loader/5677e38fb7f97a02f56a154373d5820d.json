{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nexports.__esModule = true;\n\nvar React = __importStar(require(\"react\"));\n\nvar Bus = __importStar(require(\"./bus\"));\n\nvar ShadowPortal_1 = require(\"./components/ShadowPortal\");\n\nvar Errors_1 = require(\"./container/Errors\");\n\nvar BuildError_1 = require(\"./container/BuildError\");\n\nvar ErrorBoundary_1 = require(\"./ErrorBoundary\");\n\nvar Base_1 = require(\"./styles/Base\");\n\nvar ComponentStyles_1 = require(\"./styles/ComponentStyles\");\n\nvar CssReset_1 = require(\"./styles/CssReset\");\n\nfunction reducer(state, ev) {\n  switch (ev.type) {\n    case Bus.TYPE_BUILD_OK:\n      {\n        return __assign(__assign({}, state), {\n          buildError: null\n        });\n      }\n\n    case Bus.TYPE_BUILD_ERROR:\n      {\n        return __assign(__assign({}, state), {\n          buildError: ev.message\n        });\n      }\n\n    case Bus.TYPE_REFFRESH:\n      {\n        return __assign(__assign({}, state), {\n          buildError: null,\n          errors: []\n        });\n      }\n\n    case Bus.TYPE_UNHANDLED_ERROR:\n    case Bus.TYPE_UNHANDLED_REJECTION:\n      {\n        return __assign(__assign({}, state), {\n          nextId: state.nextId + 1,\n          errors: __spreadArray(__spreadArray([], __read(state.errors)), [{\n            id: state.nextId,\n            event: ev\n          }])\n        });\n      }\n\n    default:\n      {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var _1 = ev;\n        return state;\n      }\n  }\n}\n\nvar ReactDevOverlay = function ReactDevOverlay(_a) {\n  var children = _a.children;\n\n  var _b = __read(React.useReducer(reducer, {\n    nextId: 1,\n    buildError: null,\n    errors: []\n  }), 2),\n      state = _b[0],\n      dispatch = _b[1];\n\n  React.useEffect(function () {\n    Bus.on(dispatch);\n    return function () {\n      Bus.off(dispatch);\n    };\n  }, [dispatch]);\n  var onComponentError = React.useCallback(function (_error, _componentStack) {// TODO: special handling\n  }, []);\n  var hasBuildError = state.buildError != null;\n  var hasRuntimeErrors = Boolean(state.errors.length);\n  var isMounted = hasBuildError || hasRuntimeErrors;\n  return React.createElement(React.Fragment, null, React.createElement(ErrorBoundary_1.ErrorBoundary, {\n    onError: onComponentError\n  }, children !== null && children !== void 0 ? children : null), isMounted ? React.createElement(ShadowPortal_1.ShadowPortal, null, React.createElement(CssReset_1.CssReset, null), React.createElement(Base_1.Base, null), React.createElement(ComponentStyles_1.ComponentStyles, null), hasBuildError ? React.createElement(BuildError_1.BuildError, {\n    message: state.buildError\n  }) : hasRuntimeErrors ? React.createElement(Errors_1.Errors, {\n    errors: state.errors\n  }) : undefined) : undefined);\n};\n\nexports[\"default\"] = ReactDevOverlay;","map":{"version":3,"sources":["../../src/internal/ReactDevOverlay.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nvar React = __importStar(require(\"react\"));\nvar Bus = __importStar(require(\"./bus\"));\nvar ShadowPortal_1 = require(\"./components/ShadowPortal\");\nvar Errors_1 = require(\"./container/Errors\");\nvar BuildError_1 = require(\"./container/BuildError\");\nvar ErrorBoundary_1 = require(\"./ErrorBoundary\");\nvar Base_1 = require(\"./styles/Base\");\nvar ComponentStyles_1 = require(\"./styles/ComponentStyles\");\nvar CssReset_1 = require(\"./styles/CssReset\");\nfunction reducer(state, ev) {\n    switch (ev.type) {\n        case Bus.TYPE_BUILD_OK: {\n            return __assign(__assign({}, state), { buildError: null });\n        }\n        case Bus.TYPE_BUILD_ERROR: {\n            return __assign(__assign({}, state), { buildError: ev.message });\n        }\n        case Bus.TYPE_REFFRESH: {\n            return __assign(__assign({}, state), { buildError: null, errors: [] });\n        }\n        case Bus.TYPE_UNHANDLED_ERROR:\n        case Bus.TYPE_UNHANDLED_REJECTION: {\n            return __assign(__assign({}, state), { nextId: state.nextId + 1, errors: __spreadArray(__spreadArray([], __read(state.errors)), [{ id: state.nextId, event: ev }]) });\n        }\n        default: {\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            var _1 = ev;\n            return state;\n        }\n    }\n}\nvar ReactDevOverlay = function ReactDevOverlay(_a) {\n    var children = _a.children;\n    var _b = __read(React.useReducer(reducer, { nextId: 1, buildError: null, errors: [] }), 2), state = _b[0], dispatch = _b[1];\n    React.useEffect(function () {\n        Bus.on(dispatch);\n        return function () {\n            Bus.off(dispatch);\n        };\n    }, [dispatch]);\n    var onComponentError = React.useCallback(function (_error, _componentStack) {\n        // TODO: special handling\n    }, []);\n    var hasBuildError = state.buildError != null;\n    var hasRuntimeErrors = Boolean(state.errors.length);\n    var isMounted = hasBuildError || hasRuntimeErrors;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ErrorBoundary_1.ErrorBoundary, { onError: onComponentError }, children !== null && children !== void 0 ? children : null),\n        isMounted ? (React.createElement(ShadowPortal_1.ShadowPortal, null,\n            React.createElement(CssReset_1.CssReset, null),\n            React.createElement(Base_1.Base, null),\n            React.createElement(ComponentStyles_1.ComponentStyles, null),\n            hasBuildError ? (React.createElement(BuildError_1.BuildError, { message: state.buildError })) : hasRuntimeErrors ? (React.createElement(Errors_1.Errors, { errors: state.errors })) : undefined)) : undefined));\n};\nexports[\"default\"] = ReactDevOverlay;\n//# sourceMappingURL=ReactDevOverlay.js.map"]},"metadata":{},"sourceType":"script"}