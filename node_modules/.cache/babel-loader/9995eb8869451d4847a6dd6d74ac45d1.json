{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadBinding = void 0;\n\nconst fs_1 = require(\"fs\");\n\nconst os_1 = require(\"os\");\n\nconst path_1 = require(\"path\");\n\nconst triples_1 = require(\"@napi-rs/triples\");\n\nconst ArchName = os_1.arch();\nconst PlatformName = os_1.platform();\n\nfunction loadBinding(dirname, filename = 'index', packageName) {\n  var _a, _b;\n\n  const triples = triples_1.platformArchTriples[PlatformName][ArchName];\n  let additionalErrorMsg = '';\n\n  for (const triple of triples) {\n    if (packageName) {\n      try {\n        return require(require.resolve(`${packageName}-${triple.platformArchABI}`, {\n          paths: [dirname]\n        }));\n      } catch (e) {\n        if ((e === null || e === void 0 ? void 0 : e.code) !== 'MODULE_NOT_FOUND') {\n          try {\n            const pkgPath = require.resolve(`${packageName}-${triple.platformArchABI}`, {\n              paths: [dirname]\n            });\n\n            additionalErrorMsg += `file: ${pkgPath} existed but error occurred while require it: ${(_a = e.message) !== null && _a !== void 0 ? _a : e} \\n`;\n          } catch (_c) {}\n        }\n      }\n    }\n\n    const localFilePath = path_1.join(dirname, `${filename}.${triple.platformArchABI}.node`);\n\n    if (fs_1.existsSync(localFilePath)) {\n      try {\n        return require(localFilePath);\n      } catch (e) {\n        additionalErrorMsg += `file: ${localFilePath} existed but error occurred while require it: ${(_b = e.message) !== null && _b !== void 0 ? _b : e} \\n`;\n      }\n    }\n  }\n\n  let packageList = '';\n\n  if (packageName) {\n    try {\n      const packageNameWithoutNamespace = packageName.split('/').pop();\n      packageList = fs_1.readdirSync(path_1.join(require.resolve(packageName, {\n        paths: [dirname]\n      }), '..', '..')).filter(d => d !== packageNameWithoutNamespace && d.startsWith(packageNameWithoutNamespace)).join(', ');\n    } catch (_d) {}\n  }\n\n  const errorMsg = `Can not load bindings${additionalErrorMsg ? ', ' + additionalErrorMsg : '\\n'}${packageList ? 'Installed packages: [' + packageList + ']' : ''}`;\n  throw new Error(errorMsg);\n}\n\nexports.loadBinding = loadBinding;","map":{"version":3,"sources":["C:/xampp/public_html/vamo/interface2/node_modules/@node-rs/helper/lib/loader.js"],"names":["Object","defineProperty","exports","value","loadBinding","fs_1","require","os_1","path_1","triples_1","ArchName","arch","PlatformName","platform","dirname","filename","packageName","_a","_b","triples","platformArchTriples","additionalErrorMsg","triple","resolve","platformArchABI","paths","e","code","pkgPath","message","_c","localFilePath","join","existsSync","packageList","packageNameWithoutNamespace","split","pop","readdirSync","filter","d","startsWith","_d","errorMsg","Error"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadBinding = void 0;\nconst fs_1 = require(\"fs\");\nconst os_1 = require(\"os\");\nconst path_1 = require(\"path\");\nconst triples_1 = require(\"@napi-rs/triples\");\nconst ArchName = os_1.arch();\nconst PlatformName = os_1.platform();\nfunction loadBinding(dirname, filename = 'index', packageName) {\n    var _a, _b;\n    const triples = triples_1.platformArchTriples[PlatformName][ArchName];\n    let additionalErrorMsg = '';\n    for (const triple of triples) {\n        if (packageName) {\n            try {\n                return require(require.resolve(`${packageName}-${triple.platformArchABI}`, { paths: [dirname] }));\n            }\n            catch (e) {\n                if ((e === null || e === void 0 ? void 0 : e.code) !== 'MODULE_NOT_FOUND') {\n                    try {\n                        const pkgPath = require.resolve(`${packageName}-${triple.platformArchABI}`, { paths: [dirname] });\n                        additionalErrorMsg += `file: ${pkgPath} existed but error occurred while require it: ${(_a = e.message) !== null && _a !== void 0 ? _a : e} \\n`;\n                    }\n                    catch (_c) { }\n                }\n            }\n        }\n        const localFilePath = path_1.join(dirname, `${filename}.${triple.platformArchABI}.node`);\n        if (fs_1.existsSync(localFilePath)) {\n            try {\n                return require(localFilePath);\n            }\n            catch (e) {\n                additionalErrorMsg += `file: ${localFilePath} existed but error occurred while require it: ${(_b = e.message) !== null && _b !== void 0 ? _b : e} \\n`;\n            }\n        }\n    }\n    let packageList = '';\n    if (packageName) {\n        try {\n            const packageNameWithoutNamespace = packageName.split('/').pop();\n            packageList = fs_1.readdirSync(path_1.join(require.resolve(packageName, { paths: [dirname] }), '..', '..'))\n                .filter((d) => d !== packageNameWithoutNamespace && d.startsWith(packageNameWithoutNamespace))\n                .join(', ');\n        }\n        catch (_d) { }\n    }\n    const errorMsg = `Can not load bindings${additionalErrorMsg ? ', ' + additionalErrorMsg : '\\n'}${packageList ? 'Installed packages: [' + packageList + ']' : ''}`;\n    throw new Error(errorMsg);\n}\nexports.loadBinding = loadBinding;\n"]},"metadata":{},"sourceType":"script"}