{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.detectDomainLocale = detectDomainLocale;\n\nfunction detectDomainLocale(domainItems, hostname, detectedLocale) {\n  let domainItem;\n\n  if (domainItems) {\n    if (detectedLocale) {\n      detectedLocale = detectedLocale.toLowerCase();\n    }\n\n    for (const item of domainItems) {\n      var ref, ref1; // remove port if present\n\n      const domainHostname = (ref = item.domain) === null || ref === void 0 ? void 0 : ref.split(':')[0].toLowerCase();\n\n      if (hostname === domainHostname || detectedLocale === item.defaultLocale.toLowerCase() || ((ref1 = item.locales) === null || ref1 === void 0 ? void 0 : ref1.some(locale => locale.toLowerCase() === detectedLocale))) {\n        domainItem = item;\n        break;\n      }\n    }\n  }\n\n  return domainItem;\n}","map":{"version":3,"sources":["../../../../shared/lib/i18n/detect-domain-locale.ts"],"names":[],"mappings":";;;;;QAEgB,kB,GAAA,kB;;SAAA,kB,CACd,W,EACA,Q,EACA,c,EACA;AACA,MAAI,UAAJ;;AAEA,MAAI,WAAJ,EAAiB;AACf,QAAI,cAAJ,EAAoB;AAClB,MAAA,cAAc,GAAG,cAAc,CAAC,WAAf,EAAjB;AACD;;SAEI,MAAM,I,IAAQ,W,EAAa;UAEP,G,EAIrB,I,CAN4B,CAC9B;;AACA,YAAM,cAAc,GAAA,CAAG,GAAW,GAAX,IAAI,CAAC,MAAR,MAAc,IAAd,IAAG,GAAW,KAAA,KAAX,CAAH,GAAqB,KAAlB,CAAH,GAAG,GAAW,CAAE,KAAb,CAAkB,GAAlB,EAAwB,CAAxB,EAA2B,WAA3B,EAAvB;;AACA,UACE,QAAQ,KAAK,cAAb,IACA,cAAc,KAAK,IAAI,CAAC,aAAL,CAAmB,WAAnB,EADnB,KACiD,CACjD,IAAY,GAAZ,IAAI,CAAC,OAD4C,MACrC,IADqC,IACjD,IAAY,KAAA,KAAZ,CADiD,GAC/B,KAAlB,CADiD,GACjD,IAAY,CAAE,IAAd,CAAoB,MAAF,IAAa,MAAM,CAAC,WAAP,OAAyB,cAAxD,CAFA,CADF,EAIE;AACA,QAAA,UAAU,GAAG,IAAb;;AAED;AACF;AACF;;SAEM,U;AACR","sourcesContent":["import type { DomainLocale } from '../../../server/config-shared'\n\nexport function detectDomainLocale(\n  domainItems?: DomainLocale[],\n  hostname?: string,\n  detectedLocale?: string\n) {\n  let domainItem: DomainLocale | undefined\n\n  if (domainItems) {\n    if (detectedLocale) {\n      detectedLocale = detectedLocale.toLowerCase()\n    }\n\n    for (const item of domainItems) {\n      // remove port if present\n      const domainHostname = item.domain?.split(':')[0].toLowerCase()\n      if (\n        hostname === domainHostname ||\n        detectedLocale === item.defaultLocale.toLowerCase() ||\n        item.locales?.some((locale) => locale.toLowerCase() === detectedLocale)\n      ) {\n        domainItem = item\n        break\n      }\n    }\n  }\n\n  return domainItem\n}\n"]},"metadata":{},"sourceType":"script"}